# ASP NET Web API

ASP.NET offers three frameworks
- Web Forms
- MVC
- Web Pages

ASP.NET Web API
- building RESTful applications on the .NET Framework

## ASP.NET Web API

Use HTTP methods.

Create a controller, which defines:
- `GetAllProducts` method returns an `IEnumerable<Product>` type, url `/api/products`.
- The `GetProduct` method: url `/api/products/id`.

Web API controller action can return
- void: no content 204.
- HttpResponseMessage: Convert directly to an HTTP response message.
- IHttpActionResult: Call `ExecuteAsync` to create an `HttpResponseMessage` from a factory, then convert to an HTTP response message.
- Some other type: Write the serialized return value into the response body; return 200.

Single-Page Applications (SPAs): the entire page is loaded in the browser after the initial request, but subsequent interactions take place through Ajax requests.

The Web API framework is part of the ASP.NET Stack and is designed to make it easy to implement HTTP services, generally sending and receiving JSON- or XML-formatted data through a RESTful API.

Entity Framework (EF) is an object-relational mapper (ORM) that enables you to create data access applications by programming with a conceptual application model instead of programming directly using a relational storage schema.

Initial the DB: in HTTPApplication, add `System.Data.Entity.Database.SetInitializer(new TriviaDatabaseInitializer());` to `Application_Start()`.

Global config like fommater and routes: `WebApiConfig`.

ASP.NET Scaffolding is a code generation framework for ASP.NET Web applications. The controller generated by it has
- inherit from `ApiController`.
- Context is the db of EF.
- override `Dispose` to release all the resource of Context instance.

Use Code Snippet to add help methods, for example AsyncTask.

Web API routing is very similar to MVC routing. The main difference is that Web API uses the HTTP method, not the URI path, to select the action.

Controller handles HTTP requests. The public methods of the controller are called action methods or simply actions.

When the Web API framework receives a request, it routes the request to an action. To determine which action to invoke, the framework uses a routing table: `WebApiConfig`.

convention:
- "/contacts" go to an MVC controller, and "/api/contacts" go to a Web API controller.
- Route request to Action whose name begins with that HTTP method name for GET, POST, PUT, and DELETE methods. 

Parameter Bindings: how Web API creates a value for a parameter.
- Simple types are taken from the URI.
- Complex types are taken from the request body.

Attribute Routing in Web API 2.
- solving the routing problem that resources often contain child resources.
- need decorating http methods: Delete, Get, Head, Options, Patch, Post, Put.
- need controller methods return a data transfer object (DTO) instead of the EF model. 

AJAX isn't new, but today there are JavaScript frameworks that make it easier to build and maintain a large sophisticated SPA application. This tutorial uses `Knockout.js`ã€‚
building blocks
- ASP.NET MVC creates the HTML page.
- ASP.NET Web API handles the AJAX requests and returns JSON data.
- Knockout.js data-binds the HTML elements to the JSON data.
- Entity Framework talks to the database.

"Code First" approach to EF: write C# classes that correspond to database tables, and EF creates the database.

Write domain objects as POCOs (plain-old CLR objects).



HERE: https://docs.microsoft.com/en-us/aspnet/web-api/overview/data/

Expend:
https://docs.microsoft.com/en-us/aspnet/web-api/overview/odata-support-in-aspnet-web-api/using-select-expand-and-value



# Entity Framework(EF)

https://docs.microsoft.com/en-us/aspnet/entity-framework

# RESTful

https://www.tutorialspoint.com/restful/index.htm